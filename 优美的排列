# å‡è®¾æœ‰ä» 1 åˆ° N çš„ N ä¸ªæ•´æ•°ï¼Œå¦‚æœä»è¿™ N ä¸ªæ•°å­—ä¸­æˆåŠŸæ„é€ å‡ºä¸€ä¸ªæ•°ç»„ï¼Œ
# ä½¿å¾—æ•°ç»„çš„ç¬¬ i ä½ (1 <= i <= N) æ»¡è¶³å¦‚ä¸‹ä¸¤ä¸ªæ¡ä»¶ä¸­çš„ä¸€ä¸ªï¼Œ
# æˆ‘ä»¬å°±ç§°è¿™ä¸ªæ•°ç»„ä¸ºä¸€ä¸ªä¼˜ç¾çš„æ’åˆ—ã€‚æ¡ä»¶ï¼š
#
#
#  ç¬¬ i ä½çš„æ•°å­—èƒ½è¢« i æ•´é™¤
#  i èƒ½è¢«ç¬¬ i ä½ä¸Šçš„æ•°å­—æ•´é™¤
#
#
#  ç°åœ¨ç»™å®šä¸€ä¸ªæ•´æ•° Nï¼Œè¯·é—®å¯ä»¥æ„é€ å¤šå°‘ä¸ªä¼˜ç¾çš„æ’åˆ—ï¼Ÿ
#
#  ç¤ºä¾‹1:
#
#
# è¾“å…¥: 2
# è¾“å‡º: 2
# è§£é‡Š:
#
# ç¬¬ 1 ä¸ªä¼˜ç¾çš„æ’åˆ—æ˜¯ [1, 2]:
#   ç¬¬ 1 ä¸ªä½ç½®ï¼ˆi=1ï¼‰ä¸Šçš„æ•°å­—æ˜¯1ï¼Œ1èƒ½è¢« iï¼ˆi=1ï¼‰æ•´é™¤
#   ç¬¬ 2 ä¸ªä½ç½®ï¼ˆi=2ï¼‰ä¸Šçš„æ•°å­—æ˜¯2ï¼Œ2èƒ½è¢« iï¼ˆi=2ï¼‰æ•´é™¤
#
# ç¬¬ 2 ä¸ªä¼˜ç¾çš„æ’åˆ—æ˜¯ [2, 1]:
#   ç¬¬ 1 ä¸ªä½ç½®ï¼ˆi=1ï¼‰ä¸Šçš„æ•°å­—æ˜¯2ï¼Œ2èƒ½è¢« iï¼ˆi=1ï¼‰æ•´é™¤
#   ç¬¬ 2 ä¸ªä½ç½®ï¼ˆi=2ï¼‰ä¸Šçš„æ•°å­—æ˜¯1ï¼Œiï¼ˆi=2ï¼‰èƒ½è¢« 1 æ•´é™¤
#
#
#  è¯´æ˜:
#
#
#  N æ˜¯ä¸€ä¸ªæ­£æ•´æ•°ï¼Œå¹¶ä¸”ä¸ä¼šè¶…è¿‡15ã€‚
#
#  Related Topics å›æº¯ç®—æ³•
#  ğŸ‘ 110 ğŸ‘ 0


# leetcode submit region begin(Prohibit modification and deletion)
class Solution:
    def countArrangement(self, N: int) -> int:
        all = (1 << N) - 1
        an = [0] * all

        def permutation(tmp, k, ans):
            if tmp == all:
                return 1
            if ans[tmp] >0:
                return ans[tmp]
            score = 0
            for i in range(1, N + 1):
                if(tmp & (1 << (i - 1))) == 0:
                    if(k % i == 0) or (i % k == 0):
                        score += permutation(tmp + (1 << (i - 1)), k + 1,ans)
            ans[tmp] = score
            return score
        score = permutation(0, 1,an)
        return score

if __name__ == "__main__":
    r = Solution()
    rs = r.countArrangement(2)
    print(rs)

# leetcode submit region end(Prohibit modification and deletion)
